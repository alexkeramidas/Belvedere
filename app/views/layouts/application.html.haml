!!! html
%html
    %head
        %title BelvedereGit
        = stylesheet_link_tag "application"
        = javascript_include_tag "application"

    %body
        :javascript
            jQuery(function() {
                window.$M = new (BelvedereGit.#{params[:controller]} || BelvedereGit.Base)(#{@bootstrap_data});
                if (typeof $M['#{params[:action]}'] === 'function') {
                    return $M['#{params[:action]}'].call();
                }
            });
        
        - if !@bg_list.blank?
            - @bg_list.each_with_index do |img, i|
                .bg-img{id: "bg#{i+1}", class: "#{img[:default] ? 'active' : ''}", style: "background-image: url('#{image_url(img[:filename])}');"}
        
        #page-wrapper
            - if !@bg_list.blank?
                - if @bg_list.length > 1
                    #bg-slider-controls
                        - @bg_list.each_with_index do |img, i|
                            = link_to "", "##{i+1}", id: "bg-link-#{i+1}", class: "#{img[:default] ? 'active' : ''}"
            
            #page-content
                = render 'layouts/top_menu'
                
                #page-body
                    = yield
                
                = render 'layouts/bottom_menu'
